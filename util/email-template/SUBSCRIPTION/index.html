<!DOCTYPE html>
<!--[if lte IE 7]> <html class="ie-lte7" dir="ltr"> <![endif]-->
<!--[if lte IE 9]> <html class="ie-lte9" dir="ltr"> <![endif]-->
<!--[if !IE]><!--> <html dir="ltr">             <!--<![endif]-->
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta http-equiv="cache-control" content="max-age=0" />
  <meta http-equiv="cache-control" content="no-cache" />
  <meta http-equiv="expires" content="0" />
  <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
  <meta http-equiv="pragma" content="no-cache" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="PocketCluster Mailing List Subscription">
  <meta name="keywords" content="pocketcluster, bigdata, hadoop, machine learning, data science" />
  <meta name="author" content="Sung-Taek, Kim"/>
  <link rel="publisher" href="https://twitter.com/stkim1">

  <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
  <!--[if lt IE 9]>
    <script src="./js/html5shiv.js"></script>
  <![endif]-->

  <!-- Le fav and touch icons -->
  <link rel="apple-touch-icon-precomposed" type="image/png" sizes="144x144" href="./img/apple-touch-icon-144-precomposed.png">
  <link rel="apple-touch-icon-precomposed" type="image/png" sizes="114x114" href="./img/apple-touch-icon-114-precomposed.png">
  <link rel="apple-touch-icon-precomposed" type="image/png" sizes="72x72" href="./img/apple-touch-icon-72-precomposed.png">
  <link rel="apple-touch-icon-precomposed" type="image/png" href="./img/apple-touch-icon-57-precomposed.png">
  <link rel="shortcut icon" type="image/png" href="./img/favicon.png">

  <title>PocketCluster Mailing List Subscription</title>
  <link rel='stylesheet prefetch' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css' />
  <link rel='stylesheet' href='./css/style.css' />
</head>

<body>

  <div class="wrapper">
    <form class="form-signin" action="https://news.pocketcluster.io/mailer/subscribe" method="POST" accept-charset="utf-8" name="emailListSignupForm" id="emailListSignupForm" data-list-id="TqQvvYSYj8xmGsS4b8lIjg">
      <h2 class="form-signin-heading">PocketCluster <small><br/>Updates. No spam. Delivered.</small></h2>
      <h4 id="status" class="help-block"></h4>
      <input class="form-control" type="text" name="name" required id="name" placeholder="Name" autofocus="" />
      <input class="form-control" type="email" name="email" required id="email" placeholder="Email Address" pattern="[a-zA-Z0-9._\-]+@[a-zA-Z0-9.\-]+\.[a-zA-Z]{2,4}" />      
      <label class="none"></label>
      <input class="form-control" type="hidden" name="list" value="your_List_ID" />
      <button class="btn btn-lg btn-primary btn-block" type="submit" name="submit" id="submit">Subscribe to list</button>
    </form>
    <div class="form-signin" style="border:none;background-color:transparent;">
      <small class="privacy-note">
          <strong>We respect your privacy and do not tolerate spam and will never sell, rent, lease or give away your information (name, or email) to any third party. Nor will we send you unsolicited email.</strong>
      </small>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      $("#emailListSignupForm").submit(function(e) {
        console.log('submitting');
        e.preventDefault();
        var $form = $(this),
          url = $form.attr('action');
        params = {
          name: $form.find('input[name="name"]').val(),
          email: $form.find('input[name="email"]').val(),
          list: $form.data().listId,
          boolean: true
        }
        window.message = function(text, color){
          $("#status").css("color", color).text(text);
        }
        $form.find('input').attr("disabled", "disabled");
        message('Signing up...', 'blue');
        $.post(url, params,
          function(data) {
            console.dir(data);
            if (data) {
              $form.find('input').removeAttr("disabled");
              if (data == "Some fields are missing.") {
                message("Please fill in your name and email.", "red");
              } else if (data == "Invalid email address.") {
                message("Uhoh - that doesn't look like an email address. Could you please enter your email again?", "red");
              } else if (data == "Invalid list ID.") {
                message("Oops - something went wrong. To get added, tweet me at https://twitter.com/stkim1 instead!", "red");
              } else if (data == "Already subscribed.") {
                message("You're already subscribed!", "green");
              } else {
                $("#status").text("You're subscribed!");
                $("#status").css("color", "green");
                $form.find('input, button').hide();
              }
            } else {
              alert("Sorry, unable to subscribe. Please try again later!");
              message("Oops - something went wrong. To get added, tweet me at https://twitter.com/stkim1 instead!", "red");
            }
          }
        );
      });
    });
  </script>
</body>
</html>
